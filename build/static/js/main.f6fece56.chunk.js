(this.webpackJsonpgroceryio=this.webpackJsonpgroceryio||[]).push([[0],{103:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){"use strict";n.r(t);n(73);var a=n(0),r=n.n(a),c=n(12),u=function(e){return{type:"SET_USER",user:e}},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.user;case"CLEAR_USER":return null;default:return e}},i=n(14),l=n(143),s=(n(82),n(140)),d=n(146),m=n(147),p=Object(m.a)(s.a)(d.b),f=function(e){var t=e.filters,n=e.defineFilter;return r.a.createElement("div",{className:"filter-bar"},t.map((function(e){return r.a.createElement(p,{key:e,variant:"contained",className:"filter-button",onClick:function(){return n(e)}},e.toUpperCase())})))},v=(n(83),n(84),n(4)),E=n.n(v),b=n(38),g=n(9),h=n.n(g),y=n(17),O=n(30),j=n.n(O),w="/api/products",k=null,N={getAll:function(){var e=Object(y.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get(w);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(y.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:k}},e.next=3,j.a.post(w,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(y.a)(h.a.mark((function e(t,n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.put("".concat(w,"/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteProduct:function(){var e=Object(y.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.delete("".concat(w,"/").concat(t));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){k="bearer ".concat(e)}},T=function(e,t){return function(){var n=Object(y.a)(h.a.mark((function n(a){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.update(e,t);case 2:n.sent,a({type:"UPDATE_PRODUCT",data:t});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_PRODUCT":return e.concat(t.data);case"DELETE_PRODUCT":return e.filter((function(e){return e.id!==t.data}));case"SET_PRODUCTS":return t.data;case"UPDATE_PRODUCT":return console.log(e.map((function(e){return e.id===t.data.id?t.data:e}))),e.map((function(e){return e.id===t.data.id?t.data:e}));default:return e}},S=function(e){var t=Object(i.b)(),n=e.quantity;return{count:n,inc:function(){n<99&&t(T(e.id,Object(b.a)(Object(b.a)({},e),{},{quantity:e.quantity+1})))},dec:function(){var a;t(n>0?T(e.id,Object(b.a)(Object(b.a)({},e),{},{quantity:e.quantity-1})):(a=e.id,function(){var e=Object(y.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.deleteProduct(a);case 2:n=e.sent,t({type:"DELETE_PRODUCT",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}}},x=function(e){var t=e.product,n=S(t);return r.a.createElement("div",{className:"list-card"},r.a.createElement("div",{className:"counter centered-flex"},r.a.createElement("span",null,t.name)),r.a.createElement("div",{className:"counter centered-flex pointer"},r.a.createElement("span",{onClick:n.dec},"-")),r.a.createElement("div",{className:"counter centered-flex"},r.a.createElement("span",null,n.count)),r.a.createElement("div",{className:"counter centered-flex pointer"},r.a.createElement("span",{onClick:n.inc},"+")))};x.checkPropTypes={product:E.a.object.isRequired};var U=x,_=function(e){var t=e.products;return r.a.createElement("div",{id:"list-view"},t.map((function(e){return r.a.createElement(U,{key:e.id,product:e})})))},P=(n(103),function(e){var t=e.logOut,n=Object(c.f)(),a=Object(i.c)((function(e){return e.user})),u=function(){n.push("/login")};return r.a.createElement(r.a.Fragment,null,null===a?r.a.createElement("div",{className:"log-button-container",onClick:u},r.a.createElement(p,{id:"log-button",className:"pointer",variant:"contained",color:"primary"},"Login")):r.a.createElement("div",{className:"log-button-container",onClick:t},r.a.createElement(p,{id:"log-button",className:"pointer",variant:"contained",color:"secondary"},"Logout")))});P.checkPropTypes={user:E.a.object.isRequired};var R=P,D=n(35),A=(n(105),n(23)),I={login:function(){var e=Object(y.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=function(e){return{type:"SET_MESSAGE",message:e}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MESSAGE":return t.message;default:return e}},F=function(){var e=Object(i.b)(),t=Object(c.f)(),n=Object(a.useState)(""),o=Object(D.a)(n,2),l=o[0],s=o[1],d=Object(a.useState)(""),m=Object(D.a)(d,2),p=m[0],f=m[1],v=function(){var n=Object(y.a)(h.a.mark((function n(a){var r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),n.prev=1,console.log({username:l,password:p}),n.next=5,I.login({username:l,password:p});case 5:r=n.sent,window.localStorage.setItem("loggedGroceryIOUser",JSON.stringify(r)),N.setToken(r.token),e(u(r)),s(""),f(""),t.push("/"),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(1),e(L("Wrong credentials")),setTimeout((function(){e(L(null))}),5e3);case 18:case"end":return n.stop()}}),n,null,[[1,14]])})));return function(e){return n.apply(this,arguments)}}();return r.a.createElement("div",{id:"login-form-splash"},r.a.createElement("div",{id:"login-form-container"},r.a.createElement(A.b,{to:"/"},r.a.createElement("div",{className:"close-btn emph pointer",onClick:function(){s(""),f(""),t.push("/")}},r.a.createElement("div",null,"X"))),r.a.createElement("form",{id:"login-form",onSubmit:v},r.a.createElement("div",{className:"header"},r.a.createElement("div",null,"Login")),r.a.createElement("div",{className:"label-container emph"},r.a.createElement("label",{className:"label"},"Username"),r.a.createElement("input",{id:"username",value:l,onChange:function(e){var t=e.target;return s(t.value)}})),r.a.createElement("div",{className:"label-container emph"},r.a.createElement("label",{className:"label"},"Password"),r.a.createElement("input",{id:"password",value:p,onChange:function(e){var t=e.target;return f(t.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",id:"login-submit"},"Login")),r.a.createElement("div",null,"Not signed up? Create an account to save your lists and recommendations."))))},G=(n(106),n(142)),W=function(e){return{type:"SET_VIEW",view:e}},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tile",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIEW":return t.view;default:return e}},z=function(){var e=Object(c.f)(),t=Object(i.b)();return r.a.createElement("span",{id:"navbar-menu"},r.a.createElement(p,{variant:"contained",color:"primary",mr:2,onClick:function(){return t(W("list"))}},"LIST"),r.a.createElement(p,{variant:"contained",color:"primary",mr:2,onClick:function(){return t(W("tile"))}},"TILE"),r.a.createElement(G.a,{color:"primary","aria-label":"Add product",onClick:function(){return e.push("/add_product")}},r.a.createElement("span",{className:"add-product-button"})))},V=(n(107),function(){var e=Object(i.c)((function(e){return e.message}));return r.a.createElement("div",{className:"message"},e)}),M=(n(108),n(144)),X=function(){var e=Object(c.f)(),t=Object(i.b)(),n=Object(a.useState)(""),u=Object(D.a)(n,2),o=u[0],l=u[1],d=Object(a.useState)(""),m=Object(D.a)(d,2),p=m[0],f=m[1],v=function(e){f(e.target.value)},E=function(e){return r.a.createElement("div",{className:"radio",key:e},r.a.createElement("label",null,r.a.createElement("input",{type:"radio",value:e,checked:p.toLowerCase()===e,onChange:v}),e))};return r.a.createElement("div",{id:"product-form-splash"},r.a.createElement("div",{id:"product-form-container"},r.a.createElement(A.b,{to:"/"},r.a.createElement("div",{className:"close-btn emph",onClick:function(){l(""),e.push("/")}},r.a.createElement("div",null,"X"))),r.a.createElement("form",{id:"product-form",onSubmit:function(n){n.preventDefault();var a,r={name:o,category:p,quantity:0};l(""),e.push("/"),t((a=r,function(){var e=Object(y.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.create(a);case 2:n=e.sent,t({type:"NEW_PRODUCT",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}},r.a.createElement("div",{className:"header"},r.a.createElement("div",null,"Add Product")),r.a.createElement("div",null,r.a.createElement(M.a,{label:"name",onChange:function(e){e.target.value.length<28?(l(e.target.value),t(L(""))):t(L("The new product name you provided is too long. Please make it less than ".concat(28," characters.")))}})),r.a.createElement("div",{className:"label-container emph"},r.a.createElement("label",{className:"label"},"Category"),["all","produce","dairy","frozen","meat"].map((function(e){return E(e)}))),r.a.createElement("div",null,r.a.createElement(s.a,{type:"submit",id:"product-submit"},"Add Product")))))},B=(n(109),n(110),function(e){var t=e.product,n=S(t);return r.a.createElement("div",{className:"tile-item"},r.a.createElement("div",{className:"name",onClick:n.inc},t.name.toUpperCase()),r.a.createElement("div",{className:"controls"},r.a.createElement("div",{className:"quantity pointer",onClick:n.dec},"-"),r.a.createElement("div",{className:"delete noselect"},n.count),r.a.createElement("div",{className:"quantity pointer",onClick:n.inc},"+")))});B.checkPropTypes={product:E.a.object.isRequired};var H=B,K=function(e){var t,n=e.products;return r.a.createElement("div",{id:"tileView"},(t=n,r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement(H,{key:e.id,product:e})})))))},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER":return t.filter;default:return e}},Y=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.products})),n=Object(i.c)((function(e){return e.filter})),o=Object(i.c)((function(e){return e.view}));console.log(o);Object(a.useEffect)((function(){var t=window.localStorage.getItem("loggedGroceryIOUser");if(t){var n=JSON.parse(t);e(u(n)),N.setToken(n.token)}}),[]);Object(a.useEffect)((function(){e(function(){var e=Object(y.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.getAll();case 2:n=e.sent,t({type:"SET_PRODUCTS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var s=function(){return"all"===n?t:t.filter((function(e){return e.category===n}))};return r.a.createElement(l.a,{id:"App",maxWidth:"lg"},r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/login"},r.a.createElement(F,null)),r.a.createElement(c.a,{path:"/add_product"},r.a.createElement(X,null))),r.a.createElement("header",{className:"navbar"},r.a.createElement(z,null),r.a.createElement("div",{className:"title-container"},"Groceryio"),r.a.createElement(R,{logOut:function(){e({type:"CLEAR_USER"}),N.setToken(null),window.localStorage.removeItem("loggedGroceryIOUser")}})),r.a.createElement(f,{filters:["all","produce","dairy","frozen","meat"],defineFilter:function(t){e(function(e){return{type:"SET_FILTER",filter:e}}(t))}}),r.a.createElement(V,null),"list"===o&&r.a.createElement(_,{products:s()}),"tile"===o&&r.a.createElement(K,{products:s()}))},Z=n(8),$=n.n(Z),ee=n(29),te=n(61),ne=Object(ee.c)({products:C,filter:Q,user:o,message:q,view:J}),ae=Object(ee.d)(ne,Object(ee.a)(te.a)),re=function(){$.a.render(r.a.createElement(i.a,{store:ae},r.a.createElement(A.a,null,r.a.createElement(Y,null))),document.getElementById("root"))};re(),ae.subscribe(re)},72:function(e,t,n){e.exports=n(111)},73:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){}},[[72,1,2]]]);
//# sourceMappingURL=main.f6fece56.chunk.js.map