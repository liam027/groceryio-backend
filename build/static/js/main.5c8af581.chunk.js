(this.webpackJsonpgroceryio=this.webpackJsonpgroceryio||[]).push([[0],{17:function(e,t,n){e.exports=n(50)},18:function(e,t,n){},20:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(1),r=(n(18),{TILE:"tile",LIST:"list",LOGIN:"login"}),c=n(0),o=n.n(c),l=(n(20),function(e){var t=e.filters,n=e.defineFilter;return o.a.createElement("div",{className:"filter-bar"},t.map((function(e){return o.a.createElement("span",{key:e,className:"filter-button",onClick:function(){return n(e)}},e.toUpperCase())})))}),u=function(e){var t=e.title,n=e.setAppState,a=e.user,c=e.logout,l={display:"flex",justifyContent:"center",alignItems:"middle",padding:"10px 40px",color:"white",backgroundColor:"#3568ff",borderRadius:"10px",cursor:"pointer"};return o.a.createElement("header",{style:{display:"grid",gridTemplateColumns:"1fr 8fr 1fr",padding:"20px 0px",backgroundColor:"black"}},o.a.createElement("span",{style:{gridColumn:2,textAlign:"center",fontSize:"2em",fontWeight:"bold",color:"white"}},t),null===a?o.a.createElement("div",{style:l,onClick:function(){return n(r.LOGIN)}},o.a.createElement("span",null,"Login")):o.a.createElement("div",{style:l,onClick:c},o.a.createElement("span",null,"Logout")))},i=n(15),s=n.n(i),d=(n(23),function(e){var t=e.product,n=e.deleteProduct,r=Object(c.useState)(t.quantity),l=Object(a.a)(r,2),u=l[0],i=l[1],s=t.name;return o.a.createElement("div",{className:"itemCard"},o.a.createElement("div",{className:"name",onClick:function(){u<99&&i(u+1)}},s.toUpperCase()),o.a.createElement("div",{className:"controls"},o.a.createElement("div",{className:"delete noselect",onClick:function(){return n(t.id)}},"X"),o.a.createElement("div",{className:"quantity noselect",onClick:function(){u>0&&i(u-1)}},u)))});d.checkPropTypes={product:s.a.object.isRequired};var m=d,p=(n(24),function(e){var t,n=e.products,a=e.deleteProduct;return o.a.createElement("div",{id:"itemTile"},(t=n,o.a.createElement(o.a.Fragment,null,t.map((function(e){return o.a.createElement(m,{key:e.id,product:e,deleteProduct:a})})))))}),f=(n(25),function(e){var t,n=e.products;e.deleteProduct;return o.a.createElement("div",{id:"itemList"},(t=n,o.a.createElement(o.a.Fragment,null,t.map((function(e){return o.a.createElement("div",{key:e.id,className:"list-item"},o.a.createElement("span",null,e.name),o.a.createElement("span",null,e.quantity),o.a.createElement("span",null,"X"))})))))}),v=n(2),g=n.n(v),E=n(4),b=n(5),y=n.n(b),h={login:function(){var e=Object(E.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=null,k={getAll:function(){var e=Object(E.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("/api/products");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(E.a)(g.a.mark((function e(t){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:O}},e.next=3,y.a.post("/api/products",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(E.a)(g.a.mark((function e(t,n){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.put("".concat("/api/products","/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteProduct:function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.delete("".concat("/api/products","/").concat(t));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){O="bearer ".concat(e)}},w=(n(44),function(e){var t=e.setAppState,n=e.setUser,l=e.setMessage,u=Object(c.useState)(""),i=Object(a.a)(u,2),s=i[0],d=i[1],m=Object(c.useState)(""),p=Object(a.a)(m,2),f=p[0],v=p[1],b=function(){var e=Object(E.a)(g.a.mark((function e(a){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,console.log({username:s,password:f}),e.next=5,h.login({username:s,password:f});case 5:c=e.sent,window.localStorage.setItem("loggedGroceryIOUser",JSON.stringify(c)),k.setToken(c.token),n(c),d(""),v(""),t(r.TILE),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),l("Wrong credentials"),setTimeout((function(){l(null)}),5e3);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement("div",{id:"login-modal"},o.a.createElement("div",{id:"login-form-container"},o.a.createElement("div",{className:"close-btn emph",onClick:function(){d(""),v(""),t(r.TILE)}},o.a.createElement("div",null,"X")),o.a.createElement("form",{id:"loginForm",onSubmit:b},o.a.createElement("div",{className:"header"},o.a.createElement("div",null,"Login")),o.a.createElement("div",{className:"label-container emph"},o.a.createElement("label",{className:"label"},"Username"),o.a.createElement("input",{id:"username",value:s,onChange:function(e){var t=e.target;return d(t.value)}})),o.a.createElement("div",{className:"label-container emph"},o.a.createElement("label",{className:"label"},"Password"),o.a.createElement("input",{id:"password",value:f,onChange:function(e){var t=e.target;return v(t.value)}})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit",id:"login-submit"},"Login")),o.a.createElement("div",null,"Not signed up? Create an account to save your lists and recommendations."))))}),j=(n(45),function(e){var t=e.message;return console.log(t),o.a.createElement("div",{className:"message"},t)}),S=function(e){var t=e.addProduct,n=e.setMessage,r=Object(c.useState)(""),l=Object(a.a)(r,2),u=l[0],i=l[1];return o.a.createElement("div",{id:"product-form-container"},o.a.createElement("form",{id:"product-form",onSubmit:function(e){e.preventDefault(),t({name:u,category:"produce",quantity:0}),i("")}},o.a.createElement("input",{id:"new-product-input",value:u,onChange:function(e){e.target.value.length<28?(i(e.target.value),n("")):n("The new product name you provided is too long. Please make it less than ".concat(28," characters."))}}),o.a.createElement("button",{type:"submit",id:"submitProductButton"},"Save")))},I=o.a.forwardRef((function(e,t){var n=Object(c.useState)(!1),r=Object(a.a)(n,2),l=r[0],u=r[1],i={display:l?"none":""},s={display:l?"":"none"},d=function(){u(!l)};return Object(c.useImperativeHandle)(t,(function(){return{toggleVisibility:d}})),o.a.createElement("div",null,o.a.createElement("div",{style:i},o.a.createElement("button",{onClick:d},e.buttonLabel)),o.a.createElement("div",{style:s,className:"togglableContent"},e.children,o.a.createElement("button",{onClick:d},"cancel")))}));I.displayName="Togglable";var N=I,C=(n(46),function(e){var t=e.setAppState;return o.a.createElement("div",{id:"view-selector"},o.a.createElement("span",{className:"view-option list",onClick:function(){return t(r.LIST)}},"LIST"),o.a.createElement("span",{className:"view-option tile",onClick:function(){return t(r.TILE)}},"TILE"))}),T=function(){var e=Object(c.useRef)(),t=Object(c.useState)(r.TILE),n=Object(a.a)(t,2),i=n[0],s=n[1],d=Object(c.useState)(null),m=Object(a.a)(d,2),v=m[0],g=m[1],E=Object(c.useState)([]),b=Object(a.a)(E,2),y=b[0],h=b[1],O=Object(c.useState)("all"),I=Object(a.a)(O,2),T=I[0],x=I[1],L=Object(c.useState)("Enter a new product!"),P=Object(a.a)(L,2),A=P[0],U=P[1];Object(c.useEffect)((function(){var e=window.localStorage.getItem("loggedGroceryIOUser");if(e){var t=JSON.parse(e);g(t),k.setToken(t.token)}}),[]);Object(c.useEffect)((function(){k.getAll().then((function(e){h(e),U("Products loaded!")}))}),[]);var G=function(){return"all"===T?y:y.filter((function(e){return e.category===T}))},R=function(e){k.deleteProduct(e).then((function(t){console.log("Product deleted. ID: ",t),h(y.filter((function(t){return t.id!==e})))})).catch((function(){U("ERROR: The ID '".concat(e,"' is not a current or valid product ID."))}))};return o.a.createElement("div",{id:"App"},i===r.LOGIN&&o.a.createElement(w,{setUser:g,setMessage:U,setAppState:s}),o.a.createElement(u,{title:"Groceryio",user:v,setAppState:s,logout:function(){g(null),k.setToken(null),window.localStorage.removeItem("loggedGroceryIOUser")}}),o.a.createElement(j,{message:A}),o.a.createElement(N,{buttonLabel:"Add Product",ref:e},o.a.createElement(S,{addProduct:function(t){e.current.toggleVisibility(),k.create(t).then((function(e){h(y.concat(e))}))},setMessage:U})),o.a.createElement(C,{setAppState:s}),o.a.createElement(l,{filters:["all","produce","dairy","frozen","meat"],defineFilter:function(e){x(e),console.log(e)}}),i===r.LIST&&o.a.createElement(f,{products:G(),deleteProduct:R}),i===r.TILE&&o.a.createElement(p,{products:G(),deleteProduct:R}))},x=n(16);n.n(x).a.render(o.a.createElement(T,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.5c8af581.chunk.js.map